{{>header}}

{{#concatCSS}}
  <link rel="stylesheet" href="/assets/css/home.css" />
  <link rel="stylesheet" href="/assets/css/chip.css" />
  <link rel="stylesheet" href="/assets/css/card.css" />
  <link rel="stylesheet" href="/assets/css/handy.css" />
{{/concatCSS}}

<div class="home">
  <div class="home__section home__section--list">
    {{>logo}}

    <a href="https://www.linkedin.com/in/anthonyec/" target="_blank" class="chip chip--linkedin">
      <img src="/assets/images/linkedin.svg" alt="" class="chip__icon">
      LinkedIn
    </a>

    <a href="https://x.com/anthonyec" target="_blank" class="chip chip--x">
      <img src="/assets/images/x.svg" alt="" class="chip__icon">
      @anthonyec
    </a>
    
    <a href="https://bsky.app/profile/anthony.ec" target="_blank" class="chip chip--bluesky">
      <img src="/assets/images/bluesky.svg" alt="" class="chip__icon">
      @anthonyec
    </a>

    <div class="home__chip-group">
      <a href="https://mastodon.social/@anthonyec" target="_blank" class="chip chip--icon-only chip--mastodon">
        <img src="/assets/images/mastodon.svg" alt="" class="chip__icon">
      </a>

      <a href="mailto:anthonycossins@gmail.com" target="_blank" class="chip chip--icon-only chip--email">
        <img src="/assets/images/email.svg" alt="" class="chip__icon" style="height: 20px">
      </a>
    </div>
  </div>
  
  <section class="home__section home__section--grid">
    <article class="card">
      <div class="card__image">
        <img class="card__image" src="/assets/images/little_camera_preview.jpg" alt="" style="background-color: #1C202B; aspect-ratio: 265 / 170;">
      </div>
      <h2 class="card__title">Little Camera Preview</h2>
      <a href="https://github.com/anthonyec/godot_little_camera_preview" target="_blank" class="card__link"></a>
    </article>
  
    <article class="card">
      <div class="card__image">
        <img class="card__image" src="/assets/images/salad_room.jpg" alt="" style="background-color: #00C657; aspect-ratio: 265 / 170;">
      </div>
      <h2 class="card__title">Salad Room</h2>
      <a href="https://saladroom.net/?ref=anthonycossins" target="_blank" class="card__link"></a>
    </article>
  
    <article class="card">
      <div class="card__image">
        <img class="card__image" src="/assets/images/powerlet.jpg" alt="" style="background-color: #DA6396; aspect-ratio: 265 / 170;">
      </div>
      <h2 class="card__title">Powerlet</h2>
      <a href="https://chrome.google.com/webstore/detail/powerlet/ofecodkcadbenmiknnidnfepbblapgkn" target="_blank" class="card__link"></a>
    </article>
  </section>

  <section class="home__section home__section--grid">
    <article class="card card--big">
      <div class="card__image">
        <img class="card__image" src="/assets/images/future_choice.webp" alt="Picture of four podiums and a big wide screen" loading="lazy" style="background-color: #310167; aspect-ratio: 574.2 / 364.8;">
      </div>
      <h2 class="card__title">Reddit post on my first commercial Godot project</h2> 
      <a href="https://www.reddit.com/r/godot/comments/1ndesjs/i_did_my_first_commercial_godot_project_it_was/" target="_blank" class="card__link"></a>
    </article>

    <div class="home__card-group">
      <article class="card">
        <div class="card__image">
          <img class="card__image" src="/assets/images/talk.webp" alt="Video still from my Godot conference talk" loading="lazy" style="background-color: #02192E; aspect-ratio: 570.7 / 324.45;">
          <video data-src="/assets/videos/talk_clip.mp4" autoplay muted loop preload="none"></video>
          <div class="card__image-timestamp">6:30</div>
          <button class="card__sound-button" title="Unmute">
            <img src="/assets/images/muted.svg" alt="Muted">
          </button>
        </div>
        <h2 class="card__title">Godot Conf Lighting Talk</h2>
        <a href="https://www.youtube.com/watch?v=xY26Fbu2ZEg" target="_blank" class="card__link"></a>
      </article>
      
      <article class="card">
        <div class="card__image">
          <img src="/assets/images/garden_station.webp" alt="Video still from my Godot conference talk" loading="lazy" style="background-color: #FFFFFF; aspect-ratio: 570.7 / 324.45;">
          <video data-src="/assets/videos/garden_station_clip.mp4" autoplay muted loop preload="none"></video>
          <div class="card__image-timestamp">1:03:15</div>
          <button class="card__sound-button" title="Unmute">
            <img src="/assets/images/muted.svg" alt="Muted">
          </button>
        </div>
        <h2 class="card__title">Game prototype retrospective</h2>
        <a href="https://www.youtube.com/watch?v=LgAApm9fCcI" target="_blank" class="card__link"></a>
      </article>
    </div>
  </section>

  <section class="home__section home__section--list">
    {{#posts}}
      <a href="{{path}}" class="chip chip--text-only {{#thumbnail}}chip--has-image{{/thumbnail}}">
        {{title}}
        
        {{#thumbnail}}
          <img src="{{path}}/{{thumbnail}}" class="chip__image" loading="lazy">
        {{/thumbnail}}
      </a>
    {{/posts}}
  </section>
</div>

{{#extractScript}}
  <script>
    function showVideo(video) {
      if (!(video instanceof HTMLVideoElement)) return
      
      if (!video.src) {
        video.src = video.getAttribute("data-src")
      }

      video.play()

      try {
        plausible('hover_video')
      } catch (err) {
        console.log("Event failed:", err)
      }
    }

    function hideVideo(video) {
      if (!(video instanceof HTMLVideoElement)) return

      video.pause()
    }

    function toggleMute(video, soundButton) {
      if (!(video instanceof HTMLVideoElement)) return
      if (!(soundButton instanceof HTMLButtonElement)) return

      const icon = soundButton.querySelector("img")
      if (!(icon instanceof HTMLImageElement)) return

      video.muted = !video.muted

      soundButton.title = video.muted ? "Unmute" : "Mute"
      icon.src = video.muted ? "assets/images/muted.svg" : "assets/images/unmuted.svg"

      try {
        plausible('unmuted_video')
      } catch (err) {
        console.log("Event failed:", err)
      }
    }

    const cards = document.querySelectorAll('.card')

    for (const card of cards) {
      const video = card.querySelector("video")
      if (!video) continue

      card.addEventListener("mouseover", () => showVideo(video))
      card.addEventListener("mouseout", () => hideVideo(video))

      const soundButton = card.querySelector(".card__sound-button")
      if (!soundButton) continue

      soundButton.addEventListener("click", () => toggleMute(video, soundButton))
    }
  </script>
{{/extractScript}}

{{>footer}}
